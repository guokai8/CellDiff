% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/runCellChat.R
\name{runCellChat}
\alias{runCellChat}
\title{Create CellChat Objects from Seurat Object}
\usage{
runCellChat(
  seurat_object,
  group.by,
  conditions = NULL,
  species = c("human", "mouse"),
  min.cells = 10,
  cell.type.column = "cell_type",
  population.size = TRUE,
  type = c("triMean", "truncatedMean", "thresholdedMean", "median"),
  trim = 0.1,
  raw.use = TRUE,
  thresh = 0.05,
  run.analysis = FALSE,
  reference = NULL,
  comparison_method = "all_vs_ref",
  custom_comparisons = NULL,
  cell.type.strategy = c("shared", "union"),
  show.all = FALSE,
  pThresh = 0.05,
  use_log2fc = TRUE,
  show_plots = c("barplot", "heatmap"),
  top.n = NULL,
  verbose = TRUE
)
}
\arguments{
\item{seurat_object}{A Seurat object containing single-cell RNA-seq data}

\item{group.by}{Column name in metadata to split conditions (e.g., "condition", "treatment", "genotype")}

\item{conditions}{Vector of condition names to include (NULL for all conditions in group.by)}

\item{species}{Species for CellChatDB: "human" (default) or "mouse"}

\item{min.cells}{Minimum number of cells required per cell type for filtering (default: 10)}

\item{cell.type.column}{Column name in metadata containing cell type annotations (default: "cell_type")}

\item{population.size}{Logical. Whether to consider cell population size in communication strength (default: TRUE)}

\item{type}{Method for computing communication probability: "triMean" (default), "truncatedMean", "thresholdedMean", or "median"}

\item{trim}{Trim value for truncatedMean method (default: 0.1)}

\item{raw.use}{Logical. Whether to use raw data for communication probability (default: TRUE)}

\item{thresh}{Threshold for mean expression to define expressed genes in identifyOverExpressedGenes (default: 0.05)}

\item{run.analysis}{Logical. If TRUE, automatically runs differential analysis after creating CellChat objects (default: FALSE)}

\item{reference}{Reference condition for differential analysis (required if run.analysis = TRUE)}

\item{comparison_method}{Comparison method: "all_vs_ref" (default), "all_vs_all", or "custom_pairs"}

\item{custom_comparisons}{List of custom comparison pairs (for custom_pairs method)}

\item{cell.type.strategy}{Strategy for handling missing cell types: "shared" (default) or "union"}

\item{show.all}{Logical. If TRUE, shows all pathways with visual indicators (default: FALSE)}

\item{pThresh}{P-value threshold for significance (default: 0.05)}

\item{use_log2fc}{Logical. Use log2 fold change (default: TRUE)}

\item{show_plots}{Character vector specifying which analyses to run when run.analysis = TRUE.
Options: "barplot" (rankDiffM), "heatmap" (heatDiffM), "slope" (rankDiffM slope plot),
"scatter" (scatterDiff2DM), "network" (networkLRDiff).
Default: c("barplot", "heatmap"). Use NULL to run only rankDiffM without plots.}

\item{top.n}{Number of top pathways to highlight (default: NULL for all)}

\item{verbose}{Logical. If TRUE, prints progress messages (default: TRUE)}
}
\value{
If run.analysis = FALSE: A named list of CellChat objects, one for each condition

If run.analysis = TRUE: A CellDiffAnalysis object with CellChat objects and analysis results
}
\description{
A wrapper function that takes a Seurat object and creates CellChat objects for each
condition. This simplifies the CellChat workflow by automating data extraction,
preprocessing, and communication inference for multiple conditions.
}
\details{
This wrapper function automates the CellChat workflow:
\itemize{
  \item Validates Seurat object and splits by condition
  \item Creates CellChat objects for each condition
  \item Runs CellChat preprocessing, communication inference, and aggregation
  \item Returns a named list of processed CellChat objects
}

After creating CellChat objects, you can use CellDiff functions for differential analysis:
- Use \code{compareCell()} for comprehensive differential analysis
- Use \code{rankDiffM()} for pathway ranking
- Use \code{heatDiffM()} for heatmaps
- And other CellDiff functions as needed
}
\section{CellChat Parameters}{

}

\section{Differential Analysis Parameters}{

}

\examples{
\dontrun{
# Option 1: Just create CellChat objects (run.analysis = FALSE, default)
cellchat_list <- runCellChat(
  seurat_object = pbmc,
  group.by = "condition",
  species = "human"
)

# Then manually run analysis functions
rankDiffM(object.list = cellchat_list, reference = "WT")
heatDiffM(object.list = cellchat_list, reference = "WT")

# Option 2: Run everything automatically (run.analysis = TRUE)
results <- runCellChat(
  seurat_object = pbmc,
  group.by = "condition",
  species = "human",
  run.analysis = TRUE,
  reference = "WT",
  show_plots = c("barplot", "heatmap", "scatter")  # Choose which analyses
)

# Access CellChat objects and results
results$cellchat_objects[["WT"]]
results$pathway_analysis$comparison_barplot
results$heatmap  # Only if "heatmap" in show_plots
results$scatter  # Only if "scatter" in show_plots
results$summary

# Run only specific analyses
results <- runCellChat(
  seurat_object = pbmc,
  group.by = "condition",
  species = "human",
  run.analysis = TRUE,
  reference = "WT",
  show_plots = c("barplot")  # Only pathway ranking
)

# Run all available analyses
results <- runCellChat(
  seurat_object = pbmc,
  group.by = "condition",
  species = "human",
  run.analysis = TRUE,
  reference = "WT",
  show_plots = c("barplot", "heatmap", "slope", "scatter", "network")
)

# Customize CellChat parameters
results <- runCellChat(
  seurat_object = pbmc,
  group.by = "condition",
  species = "human",
  type = "truncatedMean",     # Use truncated mean instead of triMean
  trim = 0.2,                 # Increase trim value
  thresh = 0.1,               # Higher threshold for expressed genes
  population.size = FALSE,    # Don't consider population size
  min.cells = 5               # Lower minimum cell requirement
)
}

}
