% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/runCellChat.R
\name{runCellChat}
\alias{runCellChat}
\title{Create CellChat Objects from Seurat Object}
\usage{
runCellChat(
  seurat_object,
  group.by,
  conditions = NULL,
  species = c("human", "mouse"),
  cell.type.column = "cell_type",
  assay = "RNA",
  slot.name = "data",
  db.subset = NULL,
  custom.db = NULL,
  population.size = FALSE,
  type = c("triMean", "truncatedMean", "thresholdedMean", "median"),
  trim = 0.1,
  raw.use = TRUE,
  distance.use = TRUE,
  interaction.range = 250,
  scale.distance = 0.01,
  contact.dependent = TRUE,
  thresh = 0.05,
  thresh.pc = 0,
  thresh.fc = 0,
  min.cells = 10,
  min.samples = NULL,
  rare.keep = FALSE,
  nonFilter.keep = FALSE,
  thresh.centrality = 0.05,
  compute.centrality = TRUE,
  run.analysis = FALSE,
  reference = NULL,
  comparison_method = "all_vs_ref",
  custom_comparisons = NULL,
  cell.type.strategy = c("shared", "union"),
  show.all = FALSE,
  pThresh = 0.05,
  use_log2fc = TRUE,
  show_plots = c("barplot", "heatmap"),
  top.n = NULL,
  stop.on.error = TRUE,
  return.merged = FALSE,
  save.raw = FALSE,
  verbose = TRUE,
  verbose.cellchat = FALSE
)
}
\arguments{
\item{seurat_object}{A Seurat object containing single-cell RNA-seq data}

\item{group.by}{Column name in metadata to split conditions (e.g., "condition", "treatment", "genotype")}

\item{conditions}{Vector of condition names to include (NULL for all conditions in group.by)}

\item{species}{Species for CellChatDB: "human" (default) or "mouse"}

\item{cell.type.column}{Column name in metadata containing cell type annotations (default: "cell_type")}

\item{assay}{Assay name to use from Seurat object (default: "RNA"). Can be "SCT", "integrated", or custom assay}

\item{slot.name}{For Seurat v4: slot to use ("data", "counts", "scale.data"). For v5: layer name. Default: "data"}

\item{db.subset}{Character vector to subset CellChatDB. Options: "Secreted Signaling", "ECM-Receptor", "Cell-Cell Contact". NULL uses all (default)}

\item{custom.db}{Custom CellChatDB object to use instead of built-in database (default: NULL)}

\item{population.size}{Logical. Whether to consider cell population size in communication strength (default: TRUE)}

\item{type}{Method for computing communication probability: "triMean" (default), "truncatedMean", "thresholdedMean", or "median"}

\item{trim}{Trim value for truncatedMean method (default: 0.1)}

\item{raw.use}{Logical. Whether to use raw data for communication probability (default: TRUE)}

\item{distance.use}{Logical. Use distance information for spatial data (default: TRUE)}

\item{interaction.range}{Interaction distance range for spatial data (default: 250)}

\item{scale.distance}{Distance scaling factor for spatial data (default: 0.01)}

\item{contact.dependent}{Logical. Consider contact-dependent interactions for spatial data (default: TRUE)}

\item{thresh}{Threshold for mean expression (thresh.p in identifyOverExpressedGenes, default: 0.05)}

\item{thresh.pc}{Threshold for percent of cells expressing gene (default: 0.1)}

\item{thresh.fc}{Fold change threshold for overexpressed genes (default: 0.1)}

\item{min.cells}{Minimum number of cells required per cell type (default: 10)}

\item{min.samples}{Minimum number of samples for filterCommunication (default: NULL)}

\item{rare.keep}{Keep rare interactions in filterCommunication (default: FALSE)}

\item{nonFilter.keep}{Keep non-filtered interactions (default: FALSE)}

\item{thresh.centrality}{Threshold for computing centrality in netAnalysis_computeCentrality (default: 0.05)}

\item{compute.centrality}{Logical. Whether to compute network centrality metrics (default: TRUE)}

\item{run.analysis}{Logical. If TRUE, automatically runs differential analysis after creating CellChat objects (default: FALSE)}

\item{reference}{Reference condition for differential analysis (required if run.analysis = TRUE)}

\item{comparison_method}{Comparison method: "all_vs_ref" (default), "all_vs_all", or "custom_pairs"}

\item{custom_comparisons}{List of custom comparison pairs (for custom_pairs method)}

\item{cell.type.strategy}{Strategy for handling missing cell types: "shared" (default) or "union"}

\item{show.all}{Logical. If TRUE, shows all pathways with visual indicators (default: FALSE)}

\item{pThresh}{P-value threshold for significance (default: 0.05)}

\item{use_log2fc}{Logical. Use log2 fold change (default: TRUE)}

\item{show_plots}{Character vector specifying which analyses to run when run.analysis = TRUE.
Options: "barplot" (rankDiffM), "heatmap" (heatDiffM), "slope" (rankDiffM slope plot),
"scatter" (scatterDiff2DM), "network" (networkLRDiff).
Default: c("barplot", "heatmap"). Use NULL to run only rankDiffM without plots.}

\item{top.n}{Number of top pathways to highlight (default: NULL for all)}

\item{stop.on.error}{Logical. If FALSE, continues processing other conditions when one fails (default: TRUE)}

\item{return.merged}{Logical. If TRUE, returns merged CellChat object in addition to individual objects (default: FALSE)}

\item{save.raw}{Logical. If TRUE, saves CellChat objects before aggregation (default: FALSE)}

\item{verbose}{Logical. If TRUE, prints progress messages (default: TRUE)}

\item{verbose.cellchat}{Logical. If TRUE, shows CellChat function messages (default: FALSE)}
}
\value{
If run.analysis = FALSE: A named list of CellChat objects, one for each condition

If run.analysis = TRUE: A CellDiffAnalysis object with CellChat objects and analysis results
}
\description{
A wrapper function that takes a Seurat object and creates CellChat objects for each
condition. This simplifies the CellChat workflow by automating data extraction,
preprocessing, and communication inference for multiple conditions.
}
\details{
This wrapper function automates the CellChat workflow:
\itemize{
  \item Validates Seurat object and splits by condition
  \item Creates CellChat objects for each condition
  \item Runs CellChat preprocessing, communication inference, and aggregation
  \item Returns a named list of processed CellChat objects
}

After creating CellChat objects, you can use CellDiff functions for differential analysis:
- Use \code{compareCell()} for comprehensive differential analysis
- Use \code{rankDiffM()} for pathway ranking
- Use \code{heatDiffM()} for heatmaps
- And other CellDiff functions as needed
}
\section{Data Access Parameters}{

}

\section{Database Parameters}{

}

\section{CellChat Communication Parameters}{

}

\section{CellChat Preprocessing Parameters}{

}

\section{CellChat Filtering Parameters}{

}

\section{Network Analysis Parameters}{

}

\section{Differential Analysis Parameters}{

}

\section{Control Parameters}{

}

\examples{
\dontrun{
# Load example data
data(pbmc_tutorial)

# Option 1: Just create CellChat objects (run.analysis = FALSE, default)
cellchat_list <- runCellChat(
  seurat_object = pbmc_tutorial,
  group.by = "condition",
  species = "human"
)

# Then manually run analysis functions
rankDiffM(object.list = cellchat_list, reference = "WT")
heatDiffM(object.list = cellchat_list, reference = "WT")

# Option 2: Run everything automatically (run.analysis = TRUE)
results <- runCellChat(
  seurat_object = pbmc_tutorial,
  group.by = "condition",
  species = "human",
  run.analysis = TRUE,
  reference = "WT",
  show_plots = c("barplot", "heatmap", "scatter")  # Choose which analyses
)

# Access CellChat objects and results
results$cellchat_objects[["WT"]]
results$pathway_analysis$comparison_barplot
results$heatmap  # Only if "heatmap" in show_plots
results$scatter  # Only if "scatter" in show_plots
results$summary

# Run only specific analyses
results <- runCellChat(
  seurat_object = pbmc_tutorial,
  group.by = "condition",
  species = "human",
  run.analysis = TRUE,
  reference = "WT",
  show_plots = c("barplot")  # Only pathway ranking
)

# Run all available analyses
results <- runCellChat(
  seurat_object = pbmc_tutorial,
  group.by = "condition",
  species = "human",
  run.analysis = TRUE,
  reference = "WT",
  show_plots = c("barplot", "heatmap", "slope", "scatter", "network")
)

# Customize CellChat parameters
results <- runCellChat(
  seurat_object = pbmc_tutorial,
  group.by = "condition",
  species = "human",
  type = "truncatedMean",        # Use truncated mean instead of triMean
  trim = 0.2,                    # Increase trim value
  thresh = 0.1,                  # Higher threshold for expressed genes
  thresh.centrality = 0.1,       # Centrality threshold
  population.size = FALSE,       # Don't consider population size
  compute.centrality = TRUE,     # Compute centrality metrics
  min.cells = 5                  # Lower minimum cell requirement
)
}

}
