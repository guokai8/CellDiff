% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/contributionDiff.R
\name{ContriDiff}
\alias{ContriDiff}
\title{Compare Ligand-Receptor Pair Contributions Between Two Groups}
\usage{
ContriDiff(
  object.list,
  signaling,
  signaling.name = NULL,
  sources.use = NULL,
  targets.use = NULL,
  width = 0.1,
  vertex.receiver = NULL,
  thresh = 0.05,
  group.names = NULL,
  return.data = FALSE,
  x.rotation = 0,
  title = "Comparison of L-R pair contributions",
  font.size = 10,
  font.size.title = 10,
  show.difference = TRUE,
  color.use = c("deepskyblue", "#B4464B"),
  stack.method = "side-by-side"
)
}
\arguments{
\item{object.list}{A list containing exactly two CellChat objects to compare}

\item{signaling}{Character string, the name of the signaling pathway to be analyzed}

\item{signaling.name}{Character string, custom name for the signaling pathway (if NULL, uses the value of signaling)}

\item{sources.use}{Character vector or numeric indices, source cell groups to include in analysis
(if NULL, all source cell groups will be included)}

\item{targets.use}{Character vector or numeric indices, target cell groups to include in analysis
(if NULL, all target cell groups will be included)}

\item{width}{Numeric, width of the bars (default: 0.1)}

\item{vertex.receiver}{Numeric vector, indices of receiver cells for hierarchical analysis
(if NULL, a standard plot without hierarchy is generated)}

\item{thresh}{Numeric, p-value threshold for including interactions (default: 0.05)}

\item{group.names}{Character vector of length 2, custom names for the two groups being compared
(default: NULL, which will use the names of the list elements in object.list if available,
otherwise defaults to c("Group1", "Group2"))}

\item{return.data}{Logical, whether to return the data along with the plot (default: FALSE)}

\item{x.rotation}{Numeric, rotation angle for x-axis labels in degrees (default: 0)}

\item{title}{Character string, title of the plot (default: "Comparison of L-R pair contributions")}

\item{font.size}{Numeric, font size for axis text (default: 10)}

\item{font.size.title}{Numeric, font size for plot title (default: 10)}

\item{show.difference}{Logical, whether to show difference between the two groups (default: TRUE)}

\item{color.use}{Character vector of length 2, custom colors for the two groups
(default: c("#4682B4", "#B4464B"))}

\item{stack.method}{Character string, visualization method, either "side-by-side" or "stacked"
(default: "side-by-side")}
}
\value{
If return.data = FALSE, returns a ggplot object. If return.data = TRUE, returns a list with two elements:
\itemize{
  \item LR.contribution: A data frame containing the contribution values for each L-R pair in each group
  \item gg.obj: The ggplot object
}
}
\description{
This function compares the contributions of ligand-receptor pairs to a specific signaling pathway
between two groups. It allows visualization of the relative contributions and their differences.
}
\details{
The function analyzes the contribution of each ligand-receptor pair to a specific signaling pathway
and compares these contributions between two groups. When show.difference = TRUE, it also calculates
the difference in contribution between Group2 and Group1 for each L-R pair.

The stack.method parameter controls how the data is visualized:
\itemize{
  \item "side-by-side": Creates a bar plot where the groups are displayed side by side for direct comparison
  \item "stacked": Creates a stacked bar plot showing the total contribution, and a separate plot showing the differences
}
}
\examples{
# Basic usage with named list
cellchat.list <- list(Normal = cellchat1, Tumor = cellchat2)
ContriDiff(
  object.list = cellchat.list,
  signaling = "TGFb"
  # group.names will automatically use "Normal" and "Tumor" from the list names
)

# Or with explicit group names
ContriDiff(
  object.list = cellchat.list,
  signaling = "TGFb",
  group.names = c("Healthy", "Disease")  # Override list names
)

# Show differences and customize
ContriDiff(
  object.list = cellchat.list,
  signaling = "WNT",
  show.difference = TRUE,
  stack.method = "stacked",
  color.use = c("#2E86C1", "#C0392B")
)

# Return data for further analysis
result <- ContriDiff(
  object.list = cellchat.list,
  signaling = "VEGF",
  return.data = TRUE
)
lr_data <- result$LR.contribution
top_contributors <- head(lr_data[order(lr_data$contribution, decreasing = TRUE), ], 5)

}
