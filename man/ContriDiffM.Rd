% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/contriDiffM.R
\name{ContriDiffM}
\alias{ContriDiffM}
\title{Compare Ligand-Receptor Pair Contributions Across Multiple Groups}
\usage{
ContriDiffM(
  object.list,
  signaling,
  comparison = NULL,
  signaling.name = NULL,
  sources.use = NULL,
  targets.use = NULL,
  width = 0.1,
  thresh = 0.05,
  group.names = NULL,
  return.data = FALSE,
  x.rotation = 0,
  title = "Comparison of L-R pair contributions",
  font.size = 10,
  font.size.title = 10,
  color.use = NULL,
  stack.method = "side-by-side",
  reference = 1,
  show.reference = TRUE,
  normalize = TRUE,
  show.heatmap = FALSE,
  filter.min.contrib = 0,
  top.n = NULL,
  comparison_method = c("all", "all_vs_ref", "custom_pairs"),
  custom_comparisons = NULL
)
}
\arguments{
\item{object.list}{A list containing CellChat objects to compare}

\item{signaling}{Character string, the name of the signaling pathway to be analyzed}

\item{comparison}{Optional vector of indices in object.list to include in the comparison.
If NULL (default), all objects will be compared.}

\item{signaling.name}{Character string, custom name for the signaling pathway (if NULL, uses the value of signaling)}

\item{sources.use}{Character vector or numeric indices, source cell groups to include in analysis
(if NULL, all source cell groups will be included)}

\item{targets.use}{Character vector or numeric indices, target cell groups to include in analysis
(if NULL, all target cell groups will be included)}

\item{width}{Numeric, width of the bars (default: 0.1)}

\item{thresh}{Numeric, p-value threshold for including interactions (default: 0.05)}

\item{group.names}{Character vector, custom names for the groups being compared
(default: NULL, which will use the names of the list elements in object.list if available)}

\item{return.data}{Logical, whether to return the data along with the plot (default: FALSE)}

\item{x.rotation}{Numeric, rotation angle for x-axis labels in degrees (default: 0)}

\item{title}{Character string, title of the plot (default: "Comparison of L-R pair contributions")}

\item{font.size}{Numeric, font size for axis text (default: 10)}

\item{font.size.title}{Numeric, font size for plot title (default: 10)}

\item{color.use}{Character vector, custom colors for the groups (default: uses global_colors)}

\item{stack.method}{Character string, visualization method, either "side-by-side" or "stacked"
(default: "side-by-side")}

\item{reference}{Integer or character, reference group for comparison (default: 1)}

\item{show.reference}{Logical, whether to show the reference group in visualizations (default: TRUE)}

\item{normalize}{Logical, whether to normalize contributions within each group (default: TRUE)}

\item{show.heatmap}{Logical, whether to show a heatmap visualization in addition to the bar plot (default: FALSE)}

\item{filter.min.contrib}{Numeric, minimum contribution to include an L-R pair in the visualization (default: 0)}

\item{top.n}{Integer, limit visualization to top N L-R pairs by contribution (default: NULL, shows all)}

\item{comparison_method}{Character, method for comparing groups: "all" (all groups in comparison),
"all_vs_ref" (each group vs reference), or "custom_pairs" (specified pairs).}

\item{custom_comparisons}{List of custom comparison pairs (required when comparison_method = "custom_pairs").
Each element should be a vector of length 2 containing either indices or names of conditions to compare.}
}
\value{
If return.data = FALSE, returns a list of ggplot objects. If return.data = TRUE, returns a list with:
\itemize{
  \item LR.contribution: A data frame containing the contribution values for each L-R pair in each group
  \item plots: A list of ggplot objects (bar plot and heatmap if requested)
}
}
\description{
This function compares the contributions of ligand-receptor pairs to specific signaling pathways
across multiple groups. It allows visualization of the relative contributions and their differences
in an integrated view.
}
\details{
The function analyzes the contribution of each ligand-receptor pair to a specific signaling pathway
and compares these contributions across multiple groups. When reference is specified, differences
are calculated relative to the reference group.

The stack.method parameter controls how the data is visualized:
\itemize{
  \item "side-by-side": Creates a bar plot where the groups are displayed side by side for direct comparison
  \item "stacked": Creates a stacked bar plot showing the total contribution across groups
}
}
\examples{
# Basic usage with named list
cellchat.list <- list(Normal = cellchat1, Mild = cellchat2, Severe = cellchat3)
ContriDiffM(
  object.list = cellchat.list,
  signaling = "TGFb"
)

# Compare with custom group names and colors
ContriDiffM(
  object.list = cellchat.list,
  signaling = "TGFb",
  group.names = c("Healthy", "Early Stage", "Late Stage"),
  color.use = c("blue", "green", "red")
)

# Specify a reference group and show heatmap
ContriDiffM(
  object.list = cellchat.list,
  signaling = "WNT",
  reference = "Normal",
  show.heatmap = TRUE
)

# Return data for further analysis
result <- ContriDiffM(
  object.list = cellchat.list,
  signaling = "VEGF",
  return.data = TRUE
)
lr_data <- result$LR.contribution
top_contributors <- head(lr_data[order(lr_data$contribution, decreasing = TRUE), ], 5)

# Use custom pairs comparison
ContriDiffM(
  object.list = cellchat.list,
  signaling = "TGFb",
  comparison_method = "custom_pairs",
  custom_comparisons = list(c("Normal", "Severe"), c("Mild", "Severe"))
)

}
